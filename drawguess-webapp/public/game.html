<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DrawGuess - Game</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="game.css" />
  </head>
  <body>
    <div class="bg-pattern"></div>
    
    <header class="game-header">
      <div class="timer">⏱ <span id="timer">75</span></div>
      <div class="round-info">
        <span>Round <span id="round">1</span> of <span id="totalRounds">3</span></span>
        <button id="shareRoomBtn" class="share-btn" title="Share room code">📋 Share</button>
      </div>
      <div class="word-hint" id="wordHint">GUESS THIS: _ _ _ _ _</div>
      <button class="settings-btn" aria-label="Settings">⚙</button>
    </header>

    <main class="game-layout">
      <!-- Left: Players list -->
      <aside class="players-panel">
        <div class="player-item">
          <span class="rank">#1</span>
          <span class="player-avatar">😀</span>
          <span class="player-name" id="player1Name">Player1</span>
          <span class="player-score">0 points</span>
        </div>
        <div class="player-item active">
          <span class="rank">#1</span>
          <span class="player-avatar">🤖</span>
          <span class="player-name" id="player2Name">Player2</span>
          <span class="player-score">0 points</span>
        </div>
      </aside>

      <!-- Center: Canvas -->
      <section class="canvas-container">
        <div class="canvas-actions">
          <button class="like-btn">👍</button>
          <button class="dislike-btn">👎</button>
          <button id="debugWordBtn" class="like-btn" style="display:none;">📝</button>
        </div>
        <canvas id="drawCanvas" width="800" height="600"></canvas>
        <div class="drawing-status" id="drawingStatus">Waitingggg...</div>
      </section>

      <!-- Right: Chat or Color Palette -->
      <aside class="right-panel" id="rightPanel">
        <!-- Chat for guessers -->
        <div class="chat-panel" id="chatPanel">
          <div class="chat-messages" id="chatMessages">
            <div class="chat-msg system">WelCome To The Game !!</div>
          </div>
          <div class="chat-input-wrap">
            <input type="text" id="chatInput" placeholder="Type your guess here..." maxlength="50" />
            <button id="sendChat">Send</button>
          </div>
        </div>

        <!-- Color palette for drawer -->
        <div class="palette-panel" id="palettePanel" style="display: none;">
          <div class="palette-title">Bảng màu</div>
          <div class="color-grid" id="colorGrid">
            <!-- Colors hardcoded for reliability -->
            <button class="color-btn" style="background-color: #000000;" data-color="#000000"></button>
            <button class="color-btn" style="background-color: #FFFFFF;" data-color="#FFFFFF"></button>
            <button class="color-btn" style="background-color: #C0C0C0;" data-color="#C0C0C0"></button>
            <button class="color-btn" style="background-color: #808080;" data-color="#808080"></button>
            <button class="color-btn" style="background-color: #FF0000;" data-color="#FF0000"></button>
            <button class="color-btn" style="background-color: #800000;" data-color="#800000"></button>
            <button class="color-btn" style="background-color: #FFFF00;" data-color="#FFFF00"></button>
            <button class="color-btn" style="background-color: #808000;" data-color="#808000"></button>
            <button class="color-btn" style="background-color: #00FF00;" data-color="#00FF00"></button>
            <button class="color-btn" style="background-color: #008000;" data-color="#008000"></button>
            <button class="color-btn" style="background-color: #00FFFF;" data-color="#00FFFF"></button>
            <button class="color-btn" style="background-color: #008080;" data-color="#008080"></button>
            <button class="color-btn" style="background-color: #0000FF;" data-color="#0000FF"></button>
            <button class="color-btn" style="background-color: #000080;" data-color="#000080"></button>
            <button class="color-btn" style="background-color: #FF00FF;" data-color="#FF00FF"></button>
            <button class="color-btn" style="background-color: #800080;" data-color="#800080"></button>
            <button class="color-btn" style="background-color: #FFA500;" data-color="#FFA500"></button>
            <button class="color-btn" style="background-color: #A52A2A;" data-color="#A52A2A"></button>
            <button class="color-btn" style="background-color: #FFC0CB;" data-color="#FFC0CB"></button>
            <button class="color-btn" style="background-color: #FFD700;" data-color="#FFD700"></button>
          </div>
          <div class="tools">
            <button class="tool-btn" data-tool="pen" title="Bút vẽ">🖊</button>
            <button class="tool-btn" data-tool="fill" title="Tô màu">🪣</button>
            <button class="tool-btn" data-tool="eraser" title="Tẩy">🧹</button>
            <button class="tool-btn" data-tool="clear" title="Xóa hết">🗑</button>
          </div>
          <div class="brush-size">
            <label>Kích thước: <span id="brushSizeLabel">5</span>px</label>
            <input type="range" id="brushSize" min="1" max="20" value="5" />
          </div>
        </div>
      </aside>
    </main>

    <!-- Word Selection Modal -->
    <div class="modal-overlay hidden" id="wordModal">
      <div class="modal-content">
        <h2 class="modal-title">Choose a word</h2>
        <div class="word-choices" id="wordChoices">
          <!-- Word buttons will be generated by JS -->
        </div>
      </div>
    </div>

    <!-- Podium Modal (Game Over) -->
    <div class="modal-overlay hidden" id="podiumModal" aria-hidden="true">
      <div class="modal-content podium">
        <h2 class="modal-title">Final Standings</h2>
        <div class="podium-stage">
          <div class="podium-col second" id="podiumSecond">
            <div class="medal silver">2</div>
            <div class="p-avatar" id="p2Avatar">🙂</div>
            <div class="p-name" id="p2Name">Player 2</div>
            <div class="p-score" id="p2Score">0 pts</div>
          </div>
          <div class="podium-col first" id="podiumFirst">
            <div class="medal gold">1</div>
            <div class="p-avatar" id="p1Avatar">😀</div>
            <div class="p-name" id="p1Name">Player 1</div>
            <div class="p-score" id="p1Score">0 pts</div>
          </div>
          <div class="podium-col third" id="podiumThird">
            <div class="medal bronze">3</div>
            <div class="p-avatar" id="p3Avatar">😎</div>
            <div class="p-name" id="p3Name">Player 3</div>
            <div class="p-score" id="p3Score">0 pts</div>
          </div>
        </div>
        <div class="podium-note" id="podiumNote">New game will start shortly...</div>
      </div>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="config.js"></script>
    <script src="game.js"></script>
  </body>
</html>
