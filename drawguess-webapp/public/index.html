<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DrawGuess - Lobby</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="bg-pattern"></div>
    <!-- Animated doodle background -->
    <div class="bg-doodles layer1" aria-hidden="true"></div>
    <div class="bg-doodles layer2" aria-hidden="true"></div>
    <div class="bg-doodles layer3" aria-hidden="true"></div>

    <main class="container">
      <h1 class="logo" aria-label="DrawGuess">draw<span>guess</span>.io</h1>

      <section class="card">
        <!-- Form này không cần action hay method vì chúng ta xử lý bằng JS -->
        <div id="player-info-form">
          <div class="row">
            <input id="playerName" name="playerName" type="text" placeholder="Nhập tên của bạn" maxlength="16" autocomplete="off" required />
            <select id="language" name="language" aria-label="Language">
              <option value="vi" selected>Tiếng Việt</option>
              <option value="en">English</option>
            </select>
          </div>

          <div class="avatar-picker" aria-label="Chọn avatar">
            <button type="button" class="nav" id="prevAvatar" aria-label="Avatar trước">◀</button>
            <div class="avatar" id="avatarDisplay" role="img" aria-label="Avatar">😀</div>
            <button type="button" class="nav" id="nextAvatar" aria-label="Avatar sau">▶</button>
          </div>
        </div>
      </section>

      <section class="lobby-card">
        <h2>Game Lobbies</h2>
        
        <!-- Quick Play Button -->
        <div class="quick-play-section">
            <button type="button" id="quickPlayBtn" class="btn btn-play btn-large">🎮 Quick Play</button>
            <p class="hint">Join a random game instantly!</p>
        </div>
        
        <div class="divider">or</div>
        
        <div class="room-list" id="roomList">
          <div class="room-item-placeholder">Connecting to server...</div>
        </div>
        <div class="lobby-actions">
            <button type="button" id="refreshRoomsBtn" class="btn btn-secondary">Refresh</button>
            <button type="button" id="joinByCodeBtn" class="btn btn-secondary">Join by Code</button>
            <button type="button" id="createRoomBtn" class="btn btn-play">Create Custom Room</button>
        </div>
      </section>
    </main> <!-- Thẻ <main> đóng ở đây, bao bọc nội dung chính của trang -->

    <!-- Modal được đưa ra ngoài <main> -->
    <div id="createRoomModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="modal-title">Create a New Room</h2>
            <form id="createRoomForm">
                <div class="form-group">
                    <label for="newRoomId">Room Name</label>
                    <input id="newRoomId" name="newRoomId" placeholder="e.g., Fun Times" required maxlength="15" />
                </div>
                <div class="form-group">
                    <label for="newRoomPass">Password (optional)</label>
                    <input id="newRoomPass" name="newRoomPass" type="password" placeholder="e.g., 1234" />
                </div>
                <div class="form-group">
                    <label for="newMaxPlayers">Max Players</label>
                    <input id="newMaxPlayers" name="newMaxPlayers" type="number" min="2" max="12" value="8" />
                </div>
                <div class="form-group">
                    <label for="newMaxRounds">Max Rounds</label>
                    <input id="newMaxRounds" name="newMaxRounds" type="number" min="1" max="12" value="6" />
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-play">Create</button>
                    <button type="button" id="closeModalBtn" class="btn btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Join Room Modal -->
    <div id="joinRoomModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="modal-title">Join a Room</h2>
            <form id="joinRoomForm">
                <div class="form-group">
                    <label for="joinRoomId">Room Code</label>
                    <input id="joinRoomId" name="joinRoomId" placeholder="e.g., ABC123" required maxlength="10" />
                </div>
                <div class="form-group">
                    <label for="joinRoomPass">Password (optional)</label>
                    <input id="joinRoomPass" name="joinRoomPass" type="password" placeholder="••••" />
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-play">Join</button>
                    <button type="button" id="closeJoinModalBtn" class="btn btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Chỉ gọi script MỘT LẦN ở cuối body -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
  </body>
</html>